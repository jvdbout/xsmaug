#!/bin/bash

source @sysconfdir@/@PACKAGE@/@PACKAGE@.conf

function load_xsmaug {
	cd $data/$realm
	$bin/$xsmaug $port 2> $log &
}

if [ ! -f "$bin/$xsmaug" ]; then
	echo
	echo "ERROR! No XSMAUG executable found!";
	echo "Try building the source first with 'make'.";
	echo
	exit 1;
fi;

load_xsmaug;

while true; do
	pidof $xsmaug >/dev/null
	if [ $? -eq 1 ]; then
		echo -n $(date)": ERROR! $xsmaug has failed ... reseting ...";
		load_xsmaug
		echo " done."
	fi;
	sleep 30;
done;
	

